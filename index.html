<github-md src="test.txt"></github-md>
<script>
/**!
 * @license Markdown-Tag - Add Markdown to any HTML using a <md> tag or md attribute
 * LICENSED UNDER GPL-3.0 LICENSE
 * MARKDOWN FLAVOUR: STANDARD FLAVORED MARKDOWN. 
 * MORE INFO / FLAVOR OPTIONS CAN BE FOUND AT https://github.com/MarketingPipeline/Markdown-Tag/
 */

async function getData(src) {
  try {
    const res = await fetch(src);
    const jsonResult = await res.text();
    if (jsonResult ===  "Not Found"){
       throw 'Error rendering markdown contents - file Path Not Found';
    } else{
    return jsonResult  
    }
    
    
  } catch (error) {
    return error;
  }
}


function markdownToHTML(tags){
  
   var converter = new showdown.Converter() 
converter.setOption('tables', 'on')
			
converter.setOption('emoji', 'on')

converter.setOption('strikethrough', 'on');
  
  
    tags.forEach(tag => {
if (tag.getAttribute("src")){
  // load file
   getData(tag.getAttribute("src")).then(data => {
if(data instanceof Error) {
// returned object is error
    tag.innerHTML = converter.makeHtml("Error rendering file to markdown")
} else {
  
 //returned object is not error
    tag.innerHTML = converter.makeHtml(data)
}
   })
     
} else {
  // render markdown in tag
  
  tag.innerHTML = converter.makeHtml(tag.innerHTML.replace(/&gt;/g, '>'))
}

});
}


var Debug = false;
function renderMarkdown(){
   
/* Add Github CSS  */  
  
var CSSAdded = false;
function addCss(fileName) {

  if (CSSAdded == false){
      var head = document.head;
  var link = document.createElement("link");

  link.type = "text/css";
  link.rel = "stylesheet";
  link.href = fileName;

  head.appendChild(link);
  CSSAdded = true
   
  } 

}

/* Convert Markdown Attributes */ 

  
 
if (document.querySelectorAll('[md]').length > 0) {
  
  var converter = new showdown.Converter() 
converter.setOption('tables', 'on')
			
converter.setOption('emoji', 'on')

converter.setOption('strikethrough', 'on');
  
MD_TAG = document.querySelectorAll('[md]');

 MD_TAG.forEach(tag => {
if (tag.getAttribute("src")){
  // load file
   getData(tag.getAttribute("src")).then(data => {
if(data instanceof Error) {
// returned object is error
    tag.innerHTML = converter.makeHtml("Error rendering file to markdown")
} else {
  
 //returned object is not error
    tag.innerHTML = converter.makeHtml(data)
}
   })
     
} else {
  // render markdown in tag
  
  tag.innerHTML = converter.makeHtml(tag.innerHTML.replace(/&gt;/g, '>'))
}

});

  

}

  

if (document.querySelectorAll('[github-md]').length > 0) {
  
addCss('https://cdn.jsdelivr.net/gh/MarketingPipeline/Markdown-Elements/stylesheets/github_md.css');
 

  var converter = new showdown.Converter() 
  
converter.setOption('tables', 'on')
			
converter.setOption('emoji', 'on')

converter.setOption('strikethrough', 'on')

converter.setOption('tasklists', 'true')


converter.setOption('ghMentions', 'true')


converter.setOption('simplifiedAutoLink', 'true');

  
  
GitHub_MD_TAG = document.querySelectorAll('[github-md]');

 GitHub_MD_TAG.forEach(tag => {
if (tag.getAttribute("src")){
  // load file
   getData(tag.getAttribute("src")).then(data => {
if(data instanceof Error) {
// returned object is error
    tag.innerHTML = converter.makeHtml("Error rendering file to markdown")
} else {
  
 //returned object is not error
    tag.innerHTML = converter.makeHtml(data)
}
   })
     
} else {
  // render markdown in tag
  
  tag.innerHTML = converter.makeHtml(tag.innerHTML.replace(/&gt;/g, '>'))
}

});

}  
  

 /* Convert Markdown Tags */ 
  
if (document.getElementsByTagName("md").length > 0) {
  
  var converter = new showdown.Converter() 
converter.setOption('tables', 'on')
			
converter.setOption('emoji', 'on')

converter.setOption('strikethrough', 'on');
  
TAG = document.querySelectorAll('md');
  
  TAG.forEach(tag => {
if (tag.getAttribute("src")){
  // load file
   getData(tag.getAttribute("src")).then(data => {
if(data instanceof Error) {
// returned object is error
    tag.innerHTML = converter.makeHtml("Error rendering file to markdown")
} else {
  
 //returned object is not error
    tag.innerHTML = converter.makeHtml(data)
}
   })
     
} else {
  // render markdown in tag
  
  tag.innerHTML = converter.makeHtml(tag.innerHTML.replace(/&gt;/g, '>'))
}

});
}


if (document.getElementsByTagName("github-md").length > 0) {
  
addCss('https://cdn.jsdelivr.net/gh/MarketingPipeline/Markdown-Elements/stylesheets/github_md.css');
 

  var converter = new showdown.Converter() 
  
converter.setOption('tables', 'on')
			
converter.setOption('emoji', 'on')

converter.setOption('strikethrough', 'on')

converter.setOption('tasklists', 'true')


converter.setOption('ghMentions', 'true')


converter.setOption('simplifiedAutoLink', 'true');

  
  
GitHub_MD_TAG = document.querySelectorAll("github-md");


  
markdownToHTML(GitHub_MD_TAG)
}
}






function loadMarkdownParser(){
  
  /// Add Markdown Parser To Document
var script = document.createElement('script');
script.src = "https://cdn.jsdelivr.net/gh/MarketingPipeline/Markdown-Elements/parsers/showdown.min.js";

document.head.appendChild(script); //or something of the likes  
  
  
  
  
  // On Error Loading Markdown Parser
script.onerror = function () {
 
  console.error("Markdown Tag: Error while performing function LoadMarkdownParser - There was an error loading the Markdown Parser")
  
}

  
  /// Markdown Parser Load Successful 
script.onload = function () {
 
  // Let the Magic Begin 

renderMarkdown()
  
};
}
loadMarkdownParser()
</script>
